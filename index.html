<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Êàë„ÅÆ‰∏™‰∫∫Á©∫Èó¥| ÂØß</title>
    
    <!-- ‰ºòÂåñÔºö‰ΩøÁî® defer ÂºÇÊ≠•Âä†ËΩΩ SDK -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.15.0/dist/av-min.js" defer></script>
    
    <style>
        :root {
            --text-primary: #1d1d1f;
            --font-stack: "SF Pro Display", -apple-system, BlinkMacSystemFont, sans-serif;
            --ease-out: cubic-bezier(0.25, 0.1, 0.25, 1);
            --bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: var(--font-stack); color: var(--text-primary); 
            overflow-x: hidden; position: relative; cursor: default;
            user-select: none; scroll-behavior: smooth;
            background-color: #ffffff;
            min-height: 100vh;
        }

        /* ‰ºòÂåñÔºöËÉåÊôØÊ∏≤ÊüìÊÄßËÉΩ‰ºòÂåñÔºåÂáèÂ∞ëÈáçÁªòÂå∫Âüü */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -10;
            background-image: 
                radial-gradient(at 10% 10%, rgba(255, 61, 84, 0.5) 0px, transparent 50%),
                radial-gradient(at 90% 10%, rgba(84, 218, 255, 0.5) 0px, transparent 50%),
                radial-gradient(at 50% 50%, rgba(213, 62, 255, 0.4) 0px, transparent 50%);
            background-size: 200% 200%;
            animation: paint-flow 25s ease-in-out infinite alternate;
            will-change: background-position;
        }
        
        @keyframes paint-flow { 0% { background-position: 0% 0%; } 100% { background-position: 100% 100%; } }
        a { text-decoration: none; color: inherit; -webkit-user-drag: none; }

        .ribbon-container { 
            position: fixed; top: 0; left: 61.8%; height: 100vh; width: 150px; 
            z-index: -5; pointer-events: none; transform: translateX(-50%); opacity: 0.8;
        }
        .ribbon-path { 
            fill: none; stroke-width: 40px; stroke-linecap: round; 
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.1)); 
            transition: stroke-dashoffset 0.1s linear;
        }

        #floating-text-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -6; pointer-events: none; overflow: hidden; }
        .floating-text-item { position: absolute; font-weight: 900; color: rgba(0, 0, 0, 0.05); white-space: nowrap; animation: float-swim linear infinite; will-change: transform, opacity; }
        @keyframes float-swim { 0% { transform: translate(0, 0) rotate(0deg); opacity: 0; } 20% { opacity: 0.8; } 80% { opacity: 0.8; } 100% { transform: translate(100px, -150px) rotate(20deg); opacity: 0; } }

        nav { position: fixed; top: 0; width: 100%; height: 60px; z-index: 1000; display: flex; justify-content: center; backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); background: rgba(255,255,255,0.2); border-bottom: 1px solid rgba(255,255,255,0.2); }
        .nav-inner { width: 1000px; padding: 0 40px; display: flex; justify-content: space-between; align-items: center; font-weight: 600; opacity: 0.9; cursor: pointer; height: 100%; }
        .nav-text { transition: transform 0.1s; display: inline-block; white-space: nowrap; } .nav-text:active { transform: scale(0.9); }

        .hero { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; padding-left: max(5%, calc((100vw - 1000px) / 2)); position: relative; z-index: 10; padding-right: 5%; }
        .hero h1 { font-size: clamp(40px, 9vw, 120px); font-weight: 800; line-height: 1.1; margin-bottom: 30px; color: #111; pointer-events: none; text-shadow: 0 10px 30px rgba(255,255,255,0.5); }

        #bubble-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: auto; overflow: hidden; }
        .bubble { position: absolute; border-radius: 50%; background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.9); box-shadow: 0 8px 32px rgba(0,0,0,0.05); display: flex; justify-content: center; align-items: center; text-align: center; font-weight: 700; color: #222; font-size: 14px; will-change: transform; transition: transform 0.1s linear; }

        .search-wrapper { position: relative; z-index: 999; width: 100%; max-width: 500px; }
        .search-box-shell { padding: 4px; border-radius: 60px; background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #8f00ff); background-size: 400%; animation: rainbow 6s linear infinite; transform-origin: left center; transition: transform 0.5s var(--bounce); }
        @keyframes rainbow { 0% {background-position: 0%} 100% {background-position: 400%} }
        .search-box-shell.active { transform: scale(1.1) translateX(10px); box-shadow: 0 30px 60px rgba(0,0,0,0.15); }
        .search-input { width: 100%; padding: 18px 24px; border-radius: 56px; border: none; outline: none; font-size: 16px; background: rgba(255,255,255,0.95); }

        .widget-sidebar { position: absolute; right: 5%; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 20px; z-index: 50; }
        .weather-card { width: 280px; height: 160px; background: rgba(255, 255, 255, 0.3); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-radius: 30px; border: 1px solid rgba(255,255,255,0.5); box-shadow: 0 20px 50px rgba(0,0,0,0.05); padding: 25px; display: flex; flex-direction: column; justify-content: space-between; overflow: hidden; transition: transform 0.3s; position: relative; }
        .weather-card:hover { transform: scale(1.05); }
        .weather-main { display: flex; justify-content: space-between; align-items: center; z-index: 2; position: relative; }
        .weather-temp { font-size: 48px; font-weight: 300; color: #333; }
        .weather-city { font-size: 18px; font-weight: 700; color: #111; margin-bottom: 4px; }
        .weather-desc { font-size: 14px; color: #666; }
        .rain { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .drop { position: absolute; width: 1px; height: 15px; background: rgba(0, 122, 255, 0.6); top: -20px; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(200px); } }
        
        .music-card { 
            width: 280px; height: 180px; 
            background: rgba(255, 255, 255, 0.65); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-radius: 30px; border: 1px solid rgba(255,255,255,0.8); 
            box-shadow: 0 20px 50px rgba(0,0,0,0.05); 
            padding: 20px; display: flex; flex-direction: column; justify-content: center;
            transition: transform 0.3s; position: relative; overflow: hidden; 
            user-select: none;
        }
        .music-card:hover { transform: scale(1.02); }
        .music-content { display: flex; gap: 15px; align-items: center; margin-bottom: 15px; z-index: 2; }
        .album-art { width: 60px; height: 60px; border-radius: 50%; background: #1d1d1f url('https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=200&q=80') center/cover; box-shadow: 0 8px 16px rgba(0,0,0,0.2); animation: spin 10s linear infinite; animation-play-state: paused; }
        .music-card.playing .album-art { animation-play-state: running; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        .music-info { overflow: hidden; display: flex; flex-direction: column; gap: 2px; width: 100%; }
        .music-title { font-size: 15px; font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: #222; }
        .music-artist { font-size: 12px; color: #666; }
        .music-controls { display: flex; align-items: center; gap: 10px; z-index: 2; justify-content: space-between; width: 100%; margin-top: 10px;}
        .control-btn { width: 32px; height: 32px; border-radius: 50%; background: transparent; color: #1d1d1f; border: 1px solid #eee; cursor: pointer; display: flex; justify-content: center; align-items: center; transition: 0.2s; font-size: 14px; flex-shrink: 0; }
        .control-btn:hover { background: #eee; }
        .control-btn.play { background: #1d1d1f; color: #fff; border: none; width: 40px; height: 40px; font-size: 16px; }
        .control-btn.play:hover { transform: scale(1.1); background: #333; }
        .progress-container { position: relative; width: 100%; height: 4px; background: rgba(0,0,0,0.08); border-radius: 2px; cursor: pointer; margin-top: 5px; }
        .progress-bar { position: absolute; top: 0; left: 0; height: 100%; background: #1d1d1f; border-radius: 2px; width: 0%; pointer-events: none; }
        .visualizer { display: flex; gap: 2px; height: 12px; align-items: flex-end; position: absolute; right: 20px; top: 20px; }
        .v-bar { width: 3px; background: #db9d46; border-radius: 2px; animation: jump 0.5s ease-in-out infinite alternate; }
        .v-bar:nth-child(1) { height: 6px; animation-delay: 0s; } .v-bar:nth-child(2) { height: 10px; animation-delay: 0.1s; } .v-bar:nth-child(3) { height: 4px; animation-delay: 0.2s; }
        .music-card:not(.playing) .v-bar { animation-play-state: paused; height: 3px; }
        @keyframes jump { 0% { height: 3px; } 100% { height: 12px; } }

        .deck-section { padding: 100px 0 150px; overflow: hidden; mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent); -webkit-mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent); }
        .carousel-stage { position: relative; width: 100%; height: 500px; perspective: 1000px; display: flex; justify-content: center; align-items: center; cursor: grab; touch-action: none; }
        .carousel-stage:active { cursor: grabbing; }
        .carousel-track { position: relative; width: 100%; height: 100%; transform-style: preserve-3d; }
        .web-card-wrapper { position: absolute; top: 50%; left: 50%; width: 280px; height: 400px; margin-top: -200px; margin-left: -140px; transform-style: preserve-3d; will-change: transform, opacity; }
        .web-card-inner { width: 100%; height: 100%; background: rgba(255, 255, 255, 0.65); backdrop-filter: saturate(180%) blur(20px); -webkit-backdrop-filter: saturate(180%) blur(20px); border-radius: 28px; border: 1px solid rgba(255, 255, 255, 0.8); box-shadow: 0 10px 40px rgba(0,0,0,0.08); display: flex; flex-direction: column; justify-content: space-between; padding: 30px; transition: transform 0.4s var(--bounce), background 0.3s; }
        .web-card-inner::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 6px; background: linear-gradient(90deg, #ff9a9e, #fad0c4); opacity: 0.8; }
        .web-card-wrapper:hover .web-card-inner { transform: translateY(-20px) scale(1.08) rotateX(2deg); background: rgba(255, 255, 255, 0.95); z-index: 100; box-shadow: 0 30px 60px rgba(0,0,0,0.15); }
        .card-icon { font-size: 40px; margin-bottom: 20px; transition: 0.3s; }
        .web-card-wrapper:hover .card-icon { transform: scale(1.2); }
        .card-title { font-size: 24px; font-weight: 700; color: #111; margin-bottom: 5px; }
        .card-desc { font-size: 14px; color: #666; line-height: 1.5; }
        .card-btn { margin-top: auto; padding: 10px 20px; background: #000; color: #fff; border-radius: 20px; font-size: 13px; font-weight: 600; width: fit-content; pointer-events: auto; }
        .view-all-container { text-align: center; position: relative; z-index: 10; margin-top: -40px; }
        .view-all-link { font-size: 16px; color: #0071e3; font-weight: 500; border-bottom: 1px solid transparent; transition: 0.3s; cursor: pointer; }
        .view-all-link:hover { border-bottom-color: #0071e3; }

        /* --- ÁïôË®ÄÂ¢ô --- */
        .blog-stage { position: relative; width: 100%; height: 900px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; }
        .blog-title { position: absolute; top: 120px; width: 100%; text-align: center; font-size: 56px; font-weight: 800; letter-spacing: -0.02em; transition: all 0.6s var(--ease-out); z-index: 10; text-shadow: 0 10px 30px rgba(255,255,255,0.6); }
        
        .halo-container { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 180px; height: 180px; z-index: 20; transition: all 1s var(--bounce); cursor: pointer; display: flex; justify-content: center; align-items: center; }
        .halo-ring { position: absolute; width: 100%; height: 100%; border-radius: 50%; border: 2px solid rgba(255,255,255,0.6); box-shadow: 0 0 30px rgba(100,200,255,0.5); animation: rotate-ring 10s linear infinite; }
        .halo-core { width: 100px; height: 100px; border-radius: 50%; background: radial-gradient(circle at 30% 30%, rgba(255,255,255,1), rgba(0, 162, 255, 0.8), rgba(0, 81, 255, 0.6)); filter: blur(8px); opacity: 0.9; box-shadow: 0 0 60px rgba(100,200,255,0.8); animation: pulse-core 3s ease-in-out infinite alternate; }
        .halo-glow { position: absolute; width: 140%; height: 140%; border-radius: 50%; background: conic-gradient(from 0deg, transparent, rgba(0,200,255,0.6), transparent 60%); animation: rotate-ring 4s linear infinite reverse; filter: blur(20px); }
        @keyframes rotate-ring { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes pulse-core { 0% { transform: scale(0.9); opacity: 0.8; } 100% { transform: scale(1.1); opacity: 1; } }
        
        .blog-stage.active .halo-container { left: 25%; transform: translate(-50%, -50%) scale(0.6); }
        .blog-stage.active .blog-title { opacity: 0; transform: translateY(-50px) scale(0.9); pointer-events: none; }

        .fan-interaction-zone {
            position: absolute; top: 30%; left: 30%; width: 600px; height: 600px;
            z-index: 150; pointer-events: none; touch-action: none;
        }
        .blog-stage.active .fan-interaction-zone { pointer-events: auto; cursor: grab; }

        .article-stack { 
            position: absolute; top: 50%; left: 50%; 
            width: 0px; height: 0px; 
            opacity: 0; pointer-events: none; 
        }
        .blog-stage.active .article-stack { opacity: 1; pointer-events: auto; }

        .stack-card { 
            position: absolute; left: -190px; top: -75px; 
            width: 380px; height: 150px; 
            background: rgba(255, 255, 255, 0.9); backdrop-filter: saturate(180%) blur(20px); 
            border: 1px solid rgba(255,255,255,0.8); border-radius: 24px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.1); 
            display: flex; flex-direction: column; justify-content: center; padding: 25px;
            overflow: hidden; 
            will-change: transform;
            transform-origin: -150% 50%; 
            transition: transform 0.6s var(--bounce), opacity 0.4s ease, box-shadow 0.3s;
            user-select: none;
            opacity: 0; 
            transform: rotateZ(0deg) scale(0.5) translateX(-200px); 
        }
        .stack-card.visible { opacity: 1; }

        .stack-card.focus {
            background: #fff;
            box-shadow: 0 30px 70px rgba(0,0,0,0.2);
            border-color: #fff;
            z-index: 1000;
        }
        .stack-date { font-size: 12px; color: #999; margin-bottom: 8px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
        .stack-card.focus .stack-date { color: #0071e3; }
        .stack-title { font-size: 18px; font-weight: 600; color: #222; line-height: 1.4; word-break: break-all; }
        
        .add-msg-btn {
            position: absolute; top: 50%; right: 5%; transform: translateY(-50%);
            width: 60px; height: 60px; border-radius: 50%;
            background: #111; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex; justify-content: center; align-items: center;
            font-size: 30px; color: #fff; cursor: pointer;
            opacity: 0; transition: all 0.3s var(--bounce); pointer-events: none;
            z-index: 100;
        }
        .add-msg-btn:hover { transform: translateY(-50%) scale(1.1); background: #333; }
        /* Ê†∏ÂøÉ‰øÆÂ§çÔºöÁ°Æ‰øù active Áä∂ÊÄÅ‰∏ãÂèØÁÇπÂáª */
        .blog-stage.active .add-msg-btn { opacity: 1; pointer-events: auto; }
        
        .scroll-hint { position: absolute; bottom: 10%; left: 50%; transform: translateX(-50%); font-size: 13px; color: #666; font-weight: 500; opacity: 0; transition: opacity 0.5s; pointer-events: none; text-align: center; width: 100%;}
        .blog-stage.active .scroll-hint { opacity: 1; transition-delay: 0.5s; }

        /* Ê∏∏ÊàèÈïøÂªä */
        .game-section { padding: 100px 0; max-width: 1200px; margin: 0 auto; }
        .game-header { text-align: center; font-size: 48px; font-weight: 800; margin-bottom: 60px; color: #222; text-shadow: 0 10px 20px rgba(255,255,255,0.5); }
        .game-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; padding: 0 40px; }
        .game-card { height: 340px; border-radius: 36px; background: rgba(255,255,255,0.6); backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px); border: 1px solid rgba(255,255,255,0.8); box-shadow: 0 20px 40px rgba(0,0,0,0.05); position: relative; overflow: hidden; cursor: pointer; transition: transform 0.4s var(--bounce), box-shadow 0.4s; }
        .game-card:hover { transform: translateY(-15px) scale(1.02); box-shadow: 0 40px 80px rgba(0,0,0,0.15); z-index: 10; }
        .game-glow { position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle at 50% 50%, var(--game-color), transparent 60%); opacity: 0.2; transition: opacity 0.4s; }
        .game-card:hover .game-glow { opacity: 0.5; }
        .game-sweeper { --game-color: #FF3B30; } .game-tetris { --game-color: #FFD60A; } .game-snake { --game-color: #30D158; }
        .game-content { position: absolute; bottom: 0; left: 0; width: 100%; padding: 40px; z-index: 2; }
        .game-icon { font-size: 70px; margin-bottom: 20px; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.15)); transition: transform 0.3s; }
        .game-card:hover .game-icon { transform: scale(1.2) rotate(10deg); }
        .game-title { font-size: 28px; font-weight: 800; margin-bottom: 5px; color: #111; }
        .game-sub { font-size: 14px; font-weight: 600; color: #666; text-transform: uppercase; letter-spacing: 2px; }

        /* ÂºπÁ™ó */
        .game-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); z-index: 9999; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
        .game-overlay.active { opacity: 1; pointer-events: auto; }
        .game-modal { width: 400px; max-width: 90vw; max-height: 90vh; overflow-y: auto; background: rgba(255,255,255,0.95); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-radius: 24px; padding: 30px; box-shadow: 0 40px 100px rgba(0,0,0,0.2); text-align: center; transform: scale(0.9); transition: transform 0.3s var(--bounce); position: relative; }
        .game-overlay.active .game-modal { transform: scale(1); }
        .modal-title { font-size: 24px; font-weight: 700; margin-bottom: 20px; }
        .close-btn { position: absolute; top: 20px; right: 20px; cursor: pointer; font-size: 20px; color: #999; z-index: 10; width: 30px; height: 30px; line-height: 30px; background: rgba(0,0,0,0.05); border-radius: 50%;}
        
        .msg-input { width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #ddd; margin-bottom: 20px; font-family: inherit; resize: none; height: 100px; background: rgba(255,255,255,0.8); outline: none; }
        .msg-btn { background: #111; color: #fff; padding: 10px 30px; border-radius: 20px; font-weight: 600; cursor: pointer; border: none; transition: 0.2s; }
        .msg-btn:hover { background: #333; transform: scale(1.05); }

        /* Ê∏∏ÊàèÊùø */
        .minesweeper-board { display: grid; grid-template-columns: repeat(10, 1fr); gap: 4px; margin-bottom: 20px; background: #eee; padding: 4px; border-radius: 8px; user-select: none; }
        .cell { width: 100%; aspect-ratio: 1; background: #ccc; border-radius: 4px; display: flex; justify-content: center; align-items: center; font-size: 14px; font-weight: 700; cursor: pointer; user-select: none; }
        .cell:hover { background: #bbb; }
        .cell.open { background: #fff; cursor: default; }
        .cell.mine { background: #ff3b30; }
        .cell.flag { background: #ffd60a; }
        
        .tetris-board { display: grid; grid-template-columns: repeat(10, 20px); grid-template-rows: repeat(20, 20px); gap: 1px; background: #333; padding: 4px; border-radius: 8px; margin: 0 auto 20px; width: fit-content; max-width: 100%; }
        .t-cell { width: 20px; height: 20px; background: #444; border-radius: 2px; }
        
        .snake-board { display: grid; grid-template-columns: repeat(20, 15px); grid-template-rows: repeat(20, 15px); gap: 1px; background: #333; padding: 4px; border-radius: 8px; margin: 0 auto 20px; width: fit-content; max-width: 100%; }
        .s-cell { width: 15px; height: 15px; background: #444; border-radius: 2px; }
        .s-snake { background: #30d158; }
        .s-food { background: #ff3b30; border-radius: 50%; }

        .mobile-controls { display: none; margin-top: 15px; gap: 10px; justify-content: center; }
        .d-pad { display: grid; grid-template-columns: 50px 50px 50px; grid-template-rows: 50px 50px; gap: 5px; }
        .d-btn { width: 50px; height: 50px; background: #eee; border-radius: 8px; display: flex; justify-content: center; align-items: center; font-size: 20px; cursor: pointer; user-select: none; -webkit-user-select: none; }
        .d-btn:active { background: #ccc; }
        .d-up { grid-column: 2; grid-row: 1; }
        .d-left { grid-column: 1; grid-row: 2; }
        .d-down { grid-column: 2; grid-row: 2; }
        .d-right { grid-column: 3; grid-row: 2; }
        .d-act { grid-column: 3; grid-row: 1; background: #ffd60a; color: #000; font-weight: bold; border-radius: 50%; margin-left: 20px; }

        .emoji-particle { position: fixed; pointer-events: none; user-select: none; font-size: 24px; z-index: 9999; will-change: transform, opacity; }
        @keyframes emoji-float-up { 0% { transform: translateY(0) scale(0.5); opacity: 0; } 20% { opacity: 1; transform: translateY(-20px) scale(1.2); } 100% { transform: translateY(-100px) scale(1); opacity: 0; } }
        
        footer { text-align: center; padding: 60px; color: #666; font-size: 13px; font-weight: 600; }

        /* --- Mobile / Pad Optimization --- */
        @media (max-width: 1024px) {
            .nav-inner { width: 100%; padding: 0 20px; }
            .hero h1 { font-size: 60px; }
            .widget-sidebar { right: 2%; transform: translateY(-50%) scale(0.9); }
        }

        @media (max-width: 768px) {
            /* ÁßªÂä®Á´ØÊÄßËÉΩ‰ºòÂåñÔºöÂáèÂ∞ëÊ®°Á≥ä */
            .weather-card, .music-card, .game-card, .game-modal { backdrop-filter: none; -webkit-backdrop-filter: none; background: rgba(255,255,255,0.95); }
            
            .nav-inner { padding: 0 15px; font-size: 14px; }
            
            .hero { padding: 80px 20px 40px; justify-content: flex-start; align-items: center; height: auto; min-height: 100vh; }
            .hero h1 { font-size: 42px; text-align: center; margin-top: 20px; }
            .search-wrapper { max-width: 90%; }
            
            .widget-sidebar { position: relative; top: auto; right: auto; transform: none; margin-top: 40px; flex-direction: row; flex-wrap: wrap; justify-content: center; width: 100%; }
            
            .ribbon-container { left: 90%; opacity: 0.3; }

            .carousel-stage { height: 400px; }
            .web-card-wrapper { width: 220px; height: 320px; margin-top: -160px; margin-left: -110px; }
            .web-card-inner { padding: 20px; }
            .card-icon { font-size: 30px; }
            
            .blog-stage { height: 700px; }
            .blog-title { font-size: 36px; top: 80px; }
            
            .halo-container { transform: translate(-50%, -50%) scale(0.8); }
            .halo-core { width: 120px; height: 120px; opacity: 1; background: radial-gradient(circle at 30% 30%, #fff, #4af, #22f); }

            .blog-stage.active .halo-container { left: 50%; top: 15%; transform: translate(-50%, -50%) scale(0.5); }
            
            .fan-interaction-zone { width: 300px; height: 300px; top: 40%; left: 50%; transform: translateX(-50%); }
            .stack-card { left: -140px; width: 280px; height: 130px; }
            .stack-title { font-size: 16px; }
            .add-msg-btn { right: 20px; bottom: 20px; top: auto; transform: none; }
            .add-msg-btn:hover { transform: scale(1.1); }

            .game-grid { grid-template-columns: 1fr; padding: 0 20px; }
            .game-card { height: 280px; }
            
            .game-modal { padding: 20px; width: 95%; }
            .tetris-board, .snake-board { transform: scale(0.9); margin-bottom: 10px; }
            
            .mobile-controls { display: flex; }
            
            .scroll-hint { font-size: 12px; bottom: 80px; }
        }
    </style>
</head>
<body>

    <div class="ambient-mesh"><div class="blob blob-1"></div><div class="blob blob-2"></div></div>
    <div id="floating-text-canvas"></div>

    <div class="ribbon-container" id="ribbon">
        <svg width="100%" height="100%" viewBox="0 0 100 800" preserveAspectRatio="none" style="overflow: visible;">
            <defs>
                <linearGradient id="rainbowS" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="#ff0000"><animate attributeName="stop-color" values="#ff0000;#00ff00;#0000ff;#ff0000" dur="20s" repeatCount="indefinite" /></stop>
                    <stop offset="50%" stop-color="#00ff00"><animate attributeName="stop-color" values="#00ff00;#0000ff;#ff0000;#00ff00" dur="20s" repeatCount="indefinite" /></stop>
                    <stop offset="100%" stop-color="#0000ff"><animate attributeName="stop-color" values="#0000ff;#ff0000;#00ff00;#0000ff" dur="20s" repeatCount="indefinite" /></stop>
                </linearGradient>
            </defs>
            <path class="ribbon-path" d="M 50 0 C 80 200, 20 400, 50 600 C 80 800, 20 1000, 50 1200" stroke="url(#rainbowS)" id="ribbonPath" style="opacity: 0; visibility: hidden;" />
        </svg>
    </div>

    <nav><div class="nav-inner"><span class="nav-text" id="navText1">‰Ω†‰∏çËßâÂæóÊã•Êúâ‰∏™‰∫∫ÁΩëÁ´ô</span><span class="nav-text" id="navText2">ÊòØ‰∏Ä‰ª∂ÂæàÈÖ∑ÁöÑ‰∫ãÊÉÖÂêó</span></div></nav>

    <header class="hero">
        <div id="bubble-canvas"></div>
        <h1>Ê¨¢ËøéÊù•Âà∞<br>ÂÆÅËÄÅÂ∏à„ÅÆÁßòÂØÜÂü∫Âú∞</h1>
        <div class="search-wrapper">
            <div class="search-box-shell" id="searchShell">
                <input type="text" class="search-input" id="smartInput" placeholder="ÂÆÅÂèàÂ•ΩÂ•á‰ªÄ‰πàÂë¢Ôºü" autocomplete="off">
            </div>
        </div>

        <div class="widget-sidebar">
            <div class="weather-card" id="weatherCard">
                <div class="rain" id="rainContainer"></div>
                <div class="weather-main">
                    <div><div class="weather-city">Wuhan</div><div class="weather-desc">Rainy</div></div>
                    <div class="weather-temp">22¬∞</div>
                </div>
                <div style="font-size:12px; color:#666; margin-top:10px;">H:26¬∞ L:18¬∞ ¬∑ Air Quality: Good</div>
            </div>
            
            <!-- Èü≥‰πêÊí≠ÊîæÂô® -->
            <div class="music-card" id="musicCard">
                <div class="visualizer">
                    <div class="v-bar"></div><div class="v-bar"></div><div class="v-bar"></div>
                </div>
                <div class="music-content">
                    <div class="album-art" id="albumArt"></div>
                    <div class="music-info">
                        <div class="music-title" id="trackTitle">Loading...</div>
                        <div class="music-artist" id="trackArtist">Wait</div>
                    </div>
                </div>
                <div class="progress-container" id="progContainer">
                    <div class="progress-bar" id="progBar"></div>
                </div>
                <div class="music-controls">
                    <button class="control-btn" id="prevBtn">‚èÆ</button>
                    <button class="control-btn play" id="playBtn">‚ñ∂</button>
                    <button class="control-btn" id="nextBtn">‚è≠</button>
                </div>
                <audio id="realAudio" crossorigin="anonymous"></audio>
            </div>
        </div>
    </header>

    <section class="deck-section">
        <h2 style="text-align: center; font-size: 32px; margin-bottom: 20px; font-weight: 700;">Â∏∏Áî®„ÅÆÁΩëÁ´ô</h2>
        <div class="carousel-stage" id="carouselStage"><div class="carousel-track" id="track"></div></div>
        <div class="view-all-container"><a href="#" class="view-all-link">Êü•ÁúãÊâÄÊúâÁΩëÁ´ô ‚Ä∫</a></div>
    </section>

    <!-- ÁïôË®ÄÂ¢ô -->
    <section class="blog-stage" id="blogStage">
        <div class="blog-title">ÁïôË®ÄÂ¢ô</div>
        <div class="halo-container" id="orbBtn"><div class="halo-glow"></div><div class="halo-ring"></div><div class="halo-core"></div></div>
        
        <div class="fan-interaction-zone" id="fanZone"></div>
        <div class="article-stack" id="articleStack"></div>
        
        <div class="add-msg-btn" onclick="openMsgModal()">+</div>
        <div class="scroll-hint">ÊªëÂä®ÊàñÊãñÊãΩÊâáÂΩ¢Âå∫ÂüüÁøªÈ°µ</div>
    </section>

    <section class="game-section">
        <h2 class="game-header" style="font-size: 32px; margin-bottom: 40px;">Ê∂àÈÅ£Â∞èÊ∏∏Êàè</h2>
        <div class="game-grid">
            <div class="game-card game-sweeper" onclick="initMinesweeper()"><div class="game-glow"></div><div class="game-content"><div class="game-icon">üí£</div><div class="game-title">Êâ´Èõ∑</div><div class="game-sub">Play Now</div></div></div>
            <div class="game-card game-Tetris" onclick="initTetris()"><div class="game-glow"></div><div class="game-content"><div class="game-icon">üß©</div><div class="game-title">‰øÑÁΩóÊñØÊñπÂùó</div><div class="game-sub">Play Now</div></div></div>
            <div class="game-card game-Snake" onclick="initSnake()"><div class="game-glow"></div><div class="game-content"><div class="game-icon">üêç</div><div class="game-title">Ë¥™ÂêÉËõá</div><div class="game-sub">Play Now</div></div></div>
        </div>
    </section>

    <div class="game-overlay" id="gameOverlay">
        <div class="game-modal" id="modalMsg" style="display:none;">
            <div class="close-btn" onclick="closeGame()">‚úï</div>
            <div class="modal-title">ÂÜô‰∏ãÁïôË®Ä ·∞î</div>
            <textarea class="msg-input" id="newMsgContent" placeholder="Êó†ÈúÄÁôªÂΩïÔºåÁõ¥Êé•ÁïôË®ÄÔºÅ(100Â≠ó‰ª•ÂÜÖ)" maxlength="100"></textarea>
            <button class="msg-btn" onclick="submitMsg()">ÂèëÂ∏É</button>
            <div style="font-size: 12px; color: #999; margin-top: 10px;">Powered by LeanCloud Serverless</div>
        </div>
        
        <div class="game-modal" id="modalMinesweeper" style="display:none;"><div class="close-btn" onclick="closeGame()">‚úï</div><div class="modal-title">Minesweeper</div><div class="minesweeper-board" id="msBoard"></div><div id="msStatus">Find 10 Mines</div></div>
        
        <div class="game-modal" id="modalTetris" style="display:none;">
            <div class="close-btn" onclick="closeGame()">‚úï</div>
            <div class="modal-title">Tetris</div>
            <div class="tetris-board" id="tetrisBoard"></div>
            <div id="tetrisStatus">Score: 0</div>
            <div style="font-size:12px; color:#999; margin-top:10px;" class="pc-hint">‚Üê ‚Üí Move, ‚Üë Rotate, ‚Üì Drop</div>
            <div class="mobile-controls">
                <div class="d-pad">
                    <div class="d-btn d-up" onclick="rotateTetris()">‚Üª</div>
                    <div class="d-btn d-left" onclick="moveTetris(-1,0)">‚Üê</div>
                    <div class="d-btn d-down" onclick="moveTetris(0,1)">‚Üì</div>
                    <div class="d-btn d-right" onclick="moveTetris(1,0)">‚Üí</div>
                    <div class="d-btn d-act" onclick="while(moveTetris(0,1)){}">‚ö°</div>
                </div>
            </div>
        </div>
        
        <div class="game-modal" id="modalSnake" style="display:none;">
            <div class="close-btn" onclick="closeGame()">‚úï</div>
            <div class="modal-title">Snake</div>
            <div class="snake-board" id="snakeBoard"></div>
            <div id="snakeStatus">Score: 0</div>
            <div class="mobile-controls">
                <div class="d-pad">
                    <div class="d-btn d-up" onclick="changeSnakeDir(0, -1)">‚Üë</div>
                    <div class="d-btn d-left" onclick="changeSnakeDir(-1, 0)">‚Üê</div>
                    <div class="d-btn d-down" onclick="changeSnakeDir(0, 1)">‚Üì</div>
                    <div class="d-btn d-right" onclick="changeSnakeDir(1, 0)">‚Üí</div>
                </div>
            </div>
        </div>
    </div>

    <footer>Designed by Gemini 3 Pro/Ning Haoyu. Hello World!.</footer>

    <script>
        document.addEventListener("DOMContentLoaded",()=>{
            const p=sessionStorage.getItem("sidebarScroll");if(p)setTimeout(()=>window.scrollTo(0,parseInt(p)),10);
            
            // --- ‰ºòÂÖàÂêØÂä®UIÔºåÈò≤Ê≠¢ÁôΩÂ±èÁ≠âÂæÖ ---
            initMsgStack(); 
            initWeather();
            initMusic();
            initFloatingText();
            initRibbon();
            
            // --- ÂºÇÊ≠•Â∞ùËØïÂä†ËΩΩ LeanCloud ---
            attemptLeanCloudLoad();
        });
        
        function attemptLeanCloudLoad() {
            // ËÆæÁΩÆ 10 ÁßíË∂ÖÊó∂Ê£ÄÊµãÔºàÂõΩÂÜÖËøûÊé•ÂõΩÈôÖÁâàÂèØËÉΩËæÉÊÖ¢Ôºâ
            const LC_APP_ID = "60GMpIJGbEtH3s2GIZZXhi6R-MdYXbMMI";
            const LC_APP_KEY = "7Rl7mxCFErwYvNijpezruXVM";
            const LC_SERVER_URL = "https://60gmpijg.api.lncldglobal.com";
            
            let attempts = 0;
            const checkAV = setInterval(() => {
                attempts++;
                if (window.AV) {
                    clearInterval(checkAV);
                    try {
                        AV.init({ appId: LC_APP_ID, appKey: LC_APP_KEY, serverURL: LC_SERVER_URL });
                        console.log("LeanCloud Connected.");
                        fetchCloudMessages(); // ËøûÊé•ÊàêÂäüÂêéÔºåÊõ¥Êñ∞Êï∞ÊçÆ
                    } catch (e) {
                        console.error("LC Init Error:", e);
                    }
                }
                if (attempts > 100) { // 10ÁßíÂêéÊîæÂºÉÊ£ÄÊµã
                    clearInterval(checkAV);
                    console.warn("LeanCloud load timeout. Using local mode.");
                }
            }, 100);
        }

        window.addEventListener("beforeunload",()=>sessionStorage.setItem("sidebarScroll",window.scrollY));
        
        function initRibbon() {
            const path = document.getElementById('ribbonPath');
            if(!path) return;
            const pathLen = path.getTotalLength();
            path.style.strokeDasharray = pathLen;
            path.style.strokeDashoffset = pathLen;
            path.getBoundingClientRect(); 
            path.style.visibility = 'visible';
            path.style.opacity = '1';
            const updateScroll = () => {
                const p = window.scrollY / (document.body.scrollHeight - window.innerHeight);
                path.style.strokeDashoffset = pathLen * (1 - p);
            };
            window.addEventListener('scroll', updateScroll);
            updateScroll(); 
        }
        
        function initFloatingText() {
            const layer = document.getElementById('floating-text-canvas');
            // ‰ºòÂåñÔºöÂáèÂ∞ëÁ≤íÂ≠êÊï∞ÈáèÔºå‰ªé15ÂáèÂà∞8ÔºåÊèêÂçáÊÄßËÉΩ
            for (let i = 0; i < 8; i++) {
                const el = document.createElement('div');
                el.className = 'floating-text-item';
                el.innerText = "·∞îNHY·∞î";
                el.style.left = Math.random() * 100 + '%';
                el.style.top = Math.random() * 100 + '%';
                el.style.animationDuration = (Math.random() * 10 + 10) + 's';
                el.style.fontSize = (Math.random() * 12 + 12) + 'px';
                layer.appendChild(el);
            }
        }

        function initWeather(){const rc=document.getElementById('rainContainer');for(let i=0;i<20;i++){const d=document.createElement('div');d.className='drop';d.style.left=Math.random()*100+'%';d.style.animationDuration=(Math.random()*0.5+0.5)+'s';d.style.animationDelay=Math.random()+'s';rc.appendChild(d);}}
        
        // Èü≥‰πêÊí≠ÊîæÂô®
        function initMusic() {
            const audio = document.getElementById('realAudio');
            const playBtn = document.getElementById('playBtn');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const titleEl = document.getElementById('trackTitle');
            const artistEl = document.getElementById('trackArtist');
            const coverEl = document.getElementById('albumArt');
            const bar = document.getElementById('progBar');
            const container = document.getElementById('progContainer');
            const card = document.getElementById('musicCard');

            const playlist = [
                { title: "Lofi Study", artist: "FASSounds", src: "https://cdn.pixabay.com/download/audio/2022/05/27/audio_1808fbf07a.mp3?filename=lofi-study-112191.mp3", cover: "https://images.unsplash.com/photo-1516280440614-6697288d5d38?w=200&q=80" },
                { title: "Relaxing Beat", artist: "Coma-Media", src: "https://cdn.pixabay.com/download/audio/2022/03/24/audio_07364d28ea.mp3?filename=relaxing-114996.mp3", cover: "https://images.unsplash.com/photo-1508700115892-45ecd05ae2ad?w=200&q=80" },
                { title: "Summer Night", artist: "Chillmore", src: "https://cdn.pixabay.com/download/audio/2022/10/25/audio_94430f854a.mp3?filename=summer-night-124556.mp3", cover: "https://images.unsplash.com/photo-1493225255756-d9584f8606e9?w=200&q=80" }
            ];
            
            let currentIdx = 0;

            function loadTrack(index) {
                const track = playlist[index];
                titleEl.innerText = track.title;
                artistEl.innerText = track.artist;
                coverEl.style.backgroundImage = `url('${track.cover}')`;
                audio.src = track.src;
            }
            function playTrack() {
                audio.play().then(() => {
                    playBtn.innerText = "‚è∏";
                    card.classList.add('playing');
                }).catch(e => console.error(e));
            }
            function pauseTrack() {
                audio.pause();
                playBtn.innerText = "‚ñ∂";
                card.classList.remove('playing');
            }
            loadTrack(currentIdx);
            playBtn.addEventListener('click', () => { if (audio.paused) playTrack(); else pauseTrack(); });
            nextBtn.addEventListener('click', () => { currentIdx = (currentIdx + 1) % playlist.length; loadTrack(currentIdx); playTrack(); });
            prevBtn.addEventListener('click', () => { currentIdx = (currentIdx - 1 + playlist.length) % playlist.length; loadTrack(currentIdx); playTrack(); });
            audio.addEventListener('timeupdate', () => { if (audio.duration) { const pct = (audio.currentTime / audio.duration) * 100; bar.style.width = pct + "%"; } });
            audio.addEventListener('ended', () => { currentIdx = (currentIdx + 1) % playlist.length; loadTrack(currentIdx); playTrack(); });
            container.addEventListener('click', (e) => { const rect = container.getBoundingClientRect(); const pct = (e.clientX - rect.left) / rect.width; if(audio.duration) { audio.currentTime = pct * audio.duration; } });
        }

        const bD=[{t:"Mr.ÂÆÅ üë®‚Äçüíª",s:110,x:70,y:30},{t:"ÊëÑÂΩ±+ÂêéÊúüüì∏",s:130,x:20,y:60},{t:"Ê≠¶Ê±âÂ∏Ç",s:90,x:50,y:80},{t:"ENFJ",s:80,x:30,y:20},{t:"Â§ßÂ≠¶Áîü",s:95,x:60,y:15},{t:"Áå´Áå´ÔºÅüê±",s:85,x:10,y:40}],cvs=document.getElementById('bubble-canvas'),bs=[];bD.forEach(d=>{const e=document.createElement('div');e.className='bubble';e.innerText=d.t;e.style.width=d.s+'px';e.style.height=d.s+'px';cvs.appendChild(e);bs.push({e:e,bx:d.x,by:d.y,cx:0,cy:0});});let ms={x:-9e3,y:-9e3};window.addEventListener('mousemove',e=>{const r=cvs.getBoundingClientRect();ms.x=e.clientX-r.left;ms.y=e.clientY-r.top;});function ab(){const w=cvs.offsetWidth,h=cvs.offsetHeight;bs.forEach(b=>{const tx=(b.bx/100)*w,ty=(b.by/100)*h,dx=ms.x-tx,dy=ms.y-ty,d=Math.sqrt(dx*dx+dy*dy);if(d<200){const a=Math.atan2(dy,dx),f=(200-d)/200;b.cx+=((-Math.cos(a)*f*150)-b.cx)*.1;b.cy+=((-Math.sin(a)*f*150)-b.cy)*.1;}else{b.cx+=(0-b.cx)*.05;b.cy+=(0-b.cy)*.05;}const t=Date.now()/2e3;b.e.style.left=(tx-b.e.offsetWidth/2)+'px';b.e.style.top=(ty-b.e.offsetHeight/2)+'px';b.e.style.transform=`translate(${b.cx+Math.sin(t+b.bx)*10}px,${b.cy+Math.cos(t+b.by)*10}px)`;});requestAnimationFrame(ab);}ab();
        
        const ws=[{name:"GitHub",icon:"üêô",desc:"Code",url:"https://github.com"},{name:"Dribbble",icon:"üèÄ",desc:"Design",url:"https://dribbble.com"},{name:"ChatGPT",icon:"ü§ñ",desc:"AI",url:"https://chatgpt.com"},{name:"Bilibili",icon:"üì∫",desc:"Video",url:"https://bilibili.com"},{name:"YouTube",icon:"‚ñ∂Ô∏è",desc:"Global",url:"https://youtube.com"},{name:"V2EX",icon:"‚òÅÔ∏è",desc:"Talk",url:"https://v2ex.com"},{name:"Unsplash",icon:"üì∑",desc:"Photo",url:"https://unsplash.com"},{name:"Notion",icon:"üìù",desc:"Note",url:"https://notion.so"},{name:"Figma",icon:"üé®",desc:"UI",url:"https://figma.com"},{name:"Apple",icon:"üçé",desc:"Think",url:"https://apple.com"},{name:"Google",icon:"üîç",desc:"Search",url:"https://google.com"},{name:"X",icon:"üê¶",desc:"News",url:"https://x.com"}];
        const trk=document.getElementById('track');ws.forEach(s=>{const w=document.createElement('div');w.className='web-card-wrapper';w.innerHTML=`<div class="web-card-inner"><div class="card-icon">${s.icon}</div><div><div class="card-title">${s.name}</div><div class="card-desc">${s.desc}</div></div><a href="${s.url}" target="_blank" class="card-btn" onmousedown="event.stopPropagation()" ontouchstart="event.stopPropagation()">Visit</a></div>`;trk.appendChild(w);});
        
        const stg=document.getElementById('carouselStage'),cds=document.querySelectorAll('.web-card-wrapper'),cnt=cds.length;let prg=0,tPrg=0,isD=false,sx=0,st=0,mxr=0;
        
        stg.addEventListener('mousemove',e=>{mxr=e.clientX-stg.getBoundingClientRect().left;});stg.addEventListener('mouseleave',()=>{mxr=-1;});
        stg.addEventListener('mousedown',e=>{isD=true;sx=e.clientX;st=tPrg;stg.style.cursor='grabbing';});
        window.addEventListener('mousemove',e=>{if(!isD)return;const d=e.clientX-sx;tPrg=st-(d/200);});
        window.addEventListener('mouseup',()=>{isD=false;stg.style.cursor='grab';});
        
        stg.addEventListener('touchstart',e=>{isD=true;sx=e.touches[0].clientX;st=tPrg;}, {passive: false});
        stg.addEventListener('touchmove',e=>{if(!isD)return; e.preventDefault(); const d=e.touches[0].clientX-sx;tPrg=st-(d/200);}, {passive: false});
        stg.addEventListener('touchend',()=>{isD=false;});

        function uc(){if(!isD&&mxr!==-1){const w=stg.getBoundingClientRect().width;if(mxr<w*.15&&mxr>0)tPrg-=.03;else if(mxr>w*.85&&mxr<w)tPrg+=.03;}prg+=(tPrg-prg)*.1;cds.forEach((c,i)=>{let o=(i-prg)%cnt;if(o<0)o+=cnt;if(o>cnt/2)o-=cnt;const ao=Math.abs(o);if(ao>5){c.style.display='none';}else{c.style.display='block';const tx=o*180,tz=-(ao*ao)*40,ry=-o*25,zi=100-Math.round(ao*10),op=1-(ao*.15);c.style.zIndex=zi;c.style.opacity=Math.max(op,0);c.style.transform=`translateX(${tx}px) translateZ(${tz}px) rotateY(${ry}deg)`;}});requestAnimationFrame(uc);}uc();
        
        const ems=["‚ú®","üöÄ","üéâ","üî•","üí°","üé®","üíª","üåà","üçé","‚ö°Ô∏è","üì∏"];document.addEventListener('click',e=>{if(e.target.closest('a')||e.target.closest('input')||e.target.closest('.nav-text')||e.target.closest('.halo-container')||e.target.closest('.stack-card')||e.target.closest('.game-card')||e.target.closest('.game-modal')||e.target.closest('.add-msg-btn')||e.target.closest('.control-btn')||e.target.closest('.d-btn'))return;ce(e.clientX,e.clientY);});function ee(x,y){for(let i=0;i<15;i++){setTimeout(()=>{const ox=(Math.random()-.5)*50,oy=(Math.random()-.5)*30;ce(x+ox,y+oy,true);},i*30);}}document.getElementById('navText1').addEventListener('click',e=>ee(e.clientX,e.clientY));document.getElementById('navText2').addEventListener('click',e=>ee(e.clientX,e.clientY));function ce(x,y,iex=false){const e=document.createElement('div');e.className='emoji-particle';e.innerText=ems[Math.floor(Math.random()*ems.length)];e.style.left=x+'px';e.style.top=y+'px';const s=Math.random()*20+20;e.style.fontSize=s+'px';if(iex){const a=Math.random()*Math.PI*2,v=Math.random()*100+50,tx=Math.cos(a)*v,ty=Math.sin(a)*v-100;e.animate([{transform:'translate(0,0) scale(0.5)',opacity:1},{transform:`translate(${tx}px,${ty}px) scale(1.2)`,opacity:0}],{duration:1e3,easing:'cubic-bezier(0.25,0.1,0.25,1)'}).onfinish=()=>e.remove();}else{e.style.animation='emoji-float-up 1s ease-out forwards';setTimeout(()=>e.remove(),1e3);}document.body.appendChild(e);}const sinp=document.getElementById('smartInput'),ssh=document.getElementById('searchShell');sinp.addEventListener('focus',()=>ssh.classList.add('active'));sinp.addEventListener('blur',()=>ssh.classList.remove('active'));sinp.addEventListener('keypress',e=>{if(e.key==='Enter'){let v=sinp.value.trim();if(v)window.open(/^http/.test(v)?v:'https://www.baidu.com/s?wd='+encodeURIComponent(v));}});

        // --- ÁïôË®ÄÂ¢ô (LeanCloud ‰∫ëÁ´ØÈõÜÊàê - ‰ºòÂåñÁâà) ---
        // Êú¨Âú∞ÂÖúÂ∫ïÊï∞ÊçÆÔºàÂΩì‰∫ëÁ´ØÊó†Êï∞ÊçÆÊàñÂä†ËΩΩÂ§±Ë¥•Êó∂ÊòæÁ§∫Ôºâ
        let globalMsgs = [ 
            { date: "2025.06.07", content: "È´òËÄÉÈ°∫Âà©ÔºÅ" }, 
            { date: "2024.12.25", content: "Merry Christmas! üéÑ" }, 
            { date: "2024.12.10", content: "AIË∂äÊù•Ë∂äÂèëËææ‰∫Ü„ÄÇ‚Äî‚ÄîNing" },
            { date: "2023.11.20", content: "ËØ¥ÂÆûËØùÔºåÂØπ‰∫é‰∏Ä‰∏™È´ò‰∏≠ÁîüÊù•ËØ¥‰∏çÂ§™Â•ΩÂÆûÁé∞ÂëÄ......" },
            { date: "2023.11.05", content: "ÊàëÊÉ≥Ë¶ÅÂÅö‰∏Ä‰∏™Ëá™Â∑±ÁöÑÁßÅ‰∫∫ÁΩëÁ´ô„ÄÇ‚Äî‚ÄîNing" }
        ];
        
        let renderStackCards = function() {}; 

        function fetchCloudMessages() {
            if(!window.AV) return;
            const query = new AV.Query('Message');
            query.descending('createdAt'); // ÊåâÊó∂Èó¥ÂÄíÂ∫è
            query.limit(50); // ÊúÄÂ§öÊãâÂèñ50Êù°
            query.find().then((messages) => {
                if(messages.length > 0) {
                    globalMsgs = messages.map(m => {
                        const d = m.createdAt;
                        const dateStr = d.getFullYear() + "." + (d.getMonth()+1).toString().padStart(2,'0') + "." + d.getDate().toString().padStart(2,'0');
                        return { date: dateStr, content: m.get('content') };
                    });
                    renderStackCards(); // Êï∞ÊçÆÊõ¥Êñ∞ÂêéÈáçÁªò
                }
            }).catch(console.warn);
        }

        function initMsgStack() {
            const orbBtn = document.getElementById('orbBtn');
            const blogStage = document.getElementById('blogStage');
            const stackContainer = document.getElementById('articleStack');
            const fanZone = document.getElementById('fanZone');
            let isStackOpen = false;
            let state = { scroll: 0, target: 0 };

            // Ê∏≤ÊüìÂç°ÁâáÂà∞DOM
            renderStackCards = function() {
                stackContainer.innerHTML = '';
                globalMsgs.forEach((m) => { 
                    const card = document.createElement('div'); 
                    card.className = 'stack-card'; 
                    card.innerHTML = `<div class="stack-date">${m.date}</div><div class="stack-title">${m.content}</div>`; 
                    stackContainer.appendChild(card); 
                });
            }
            // Á´ãÂç≥ËøõË°å‰∏ÄÊ¨°Êú¨Âú∞Ê∏≤Êüì
            renderStackCards();

            // Âä®ÁîªÂæ™ÁéØ
            function loop() {
                if (!isStackOpen) {
                    // Â¶ÇÊûúÂÖ≥Èó≠Ôºå‰øùÊåÅÂç°ÁâáÈöêËóèÈÄªËæë
                    const cards = document.querySelectorAll('.stack-card');
                    cards.forEach(c => {
                        if(c.classList.contains('visible')) {
                            c.classList.remove('visible');
                            c.style.transform = `rotateZ(0deg) scale(0.5) translateX(-200px)`;
                            c.style.opacity = 0;
                        }
                    });
                    requestAnimationFrame(loop);
                    return;
                }
                
                state.scroll += (state.target - state.scroll) * 0.1;
                const cards = document.querySelectorAll('.stack-card');
                const total = cards.length;
                
                if(total > 0) {
                    cards.forEach((card, i) => {
                        if(!card.classList.contains('visible')) card.classList.add('visible');
                        let diff = (i - state.scroll) % total;
                        if (diff > total / 2) diff -= total;
                        if (diff < -total / 2) diff += total;

                        if (Math.abs(diff) > 4.5) {
                            card.style.opacity = 0;
                            card.style.pointerEvents = 'none';
                        } else {
                            card.style.pointerEvents = 'auto';
                            const angle = diff * 15; 
                            const scale = 1 - Math.abs(diff) * 0.1;
                            card.style.transform = `rotateZ(${angle}deg) scale(${scale})`;
                            const opacity = 1 - Math.abs(diff) * 0.2;
                            card.style.opacity = Math.max(0, opacity);
                            card.style.zIndex = 100 - Math.round(Math.abs(diff) * 10);
                            if(Math.abs(diff) < 0.5) card.classList.add('focus');
                            else card.classList.remove('focus');
                        }
                    });
                }
                requestAnimationFrame(loop);
            }
            loop();

            // ‰∫ã‰ª∂ÁõëÂê¨ - ÊîæÂú®Ê≠§Â§ÑÁ°Æ‰øùÁ´ãÂç≥ÁîüÊïà
            orbBtn.addEventListener('click', () => { 
                isStackOpen = !isStackOpen; 
                blogStage.classList.toggle('active', isStackOpen); 
                if(!isStackOpen) state.target = 0;
            });
            
            // Mouse Wheel
            fanZone.addEventListener('wheel', (e) => {
                if (!isStackOpen) return;
                e.preventDefault();
                state.target += e.deltaY * 0.0025; 
            });

            // Touch Drag
            let startY = 0, startScroll = 0;
            fanZone.addEventListener('touchstart', (e) => {
                if (!isStackOpen) return;
                startY = e.touches[0].clientY; startScroll = state.target;
            }, {passive: false});
            fanZone.addEventListener('touchmove', (e) => {
                if (!isStackOpen) return;
                e.preventDefault(); 
                state.target = startScroll - (e.touches[0].clientY - startY) * 0.01; 
            }, {passive: false});
        }

        function openMsgModal() {
            document.getElementById('gameOverlay').classList.add('active');
            document.getElementById('modalMsg').style.display = 'block';
            document.getElementById('modalMinesweeper').style.display='none';
            document.getElementById('modalTetris').style.display='none';
            document.getElementById('modalSnake').style.display='none';
            document.getElementById('newMsgContent').focus();
        }

        function submitMsg() {
            const inputEl = document.getElementById('newMsgContent');
            const txt = inputEl.value;
            if(!txt.trim()) { alert("Please write something!"); return; }
            
            const btn = document.querySelector('.msg-btn');
            btn.innerText = "ÂèëÂ∏É‰∏≠...";
            btn.disabled = true;

            // Êèê‰∫§Âà∞‰∫ëÁ´Ø (Â¶ÇÊûúÂ§±Ë¥•ÂàôÊú¨Âú∞Ê®°Êãü)
            try {
                if (window.AV) {
                    const MessageClass = AV.Object.extend('Message');
                    const message = new MessageClass();
                    message.set('content', txt);
                    message.save().then((savedMsg) => {
    // ÊàêÂäüÈÉ®ÂàÜ‰∏çÂèò
    alert("ÂèëÂ∏ÉÊàêÂäüÔºÅ");
    const d = savedMsg.createdAt;
    const dateStr = d.getFullYear() + "." + (d.getMonth()+1).toString().padStart(2,'0') + "." + d.getDate().toString().padStart(2,'0');
    globalMsgs.unshift({ date: dateStr, content: txt });
    if(renderStackCards) renderStackCards();
    resetModal(btn, inputEl);
}, (error) => {
    // === ‰øÆÊîπËøôÈáå ===
    // ‰∏çË¶ÅÁõ¥Êé•ËΩ¨ÂÖ•Êú¨Âú∞Ê®°ÂºèÔºåÂÖàÂºπÁ™óÂëäËØâÊàëÊä•Èîô‰ø°ÊÅØ
    console.error(error); // Âú®ÊéßÂà∂Âè∞ÊâìÂç∞ËØ¶ÁªÜ‰ø°ÊÅØ
    alert("LeanCloud ËøûÊé•Â§±Ë¥•ÔºÅÈîôËØØ‰ª£Á†Å: " + error.code + "\nÈîôËØØ‰ø°ÊÅØ: " + error.message);
    
    // Â¶ÇÊûú‰Ω†ÊÉ≥‰øùÁïôÊú¨Âú∞Ê®°Âºè‰Ωú‰∏∫Â§áÈÄâÔºåÂèØ‰ª•‰øùÁïô‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºå‰ΩÜÂú®Ë∞ÉËØïÈò∂ÊÆµÂª∫ËÆÆÂÖàÊ≥®ÈáäÊéâ
    /*
    console.warn("Cloud save failed, using local fallback:", error);
    alert("ÂèëÂ∏ÉÊàêÂäüÔºÅ(Êú¨Âú∞Ê®°Âºè)");
    const d = new Date();
    // ...
    resetModal(btn, inputEl);
    */
    
    // ÊÅ¢Â§çÊåâÈíÆÁä∂ÊÄÅ‰ª•‰æøÈáçËØï
    btn.innerText = "ÂèëÂ∏É";
    btn.disabled = false;
});
                } else {
                    // SDKÊú™Âä†ËΩΩ -> Êú¨Âú∞ÂèëÂ∏É
                    alert("ÂèëÂ∏ÉÊàêÂäüÔºÅ(Êú¨Âú∞Ê®°Âºè)");
                    const d = new Date();
                    const dateStr = d.getFullYear() + "." + (d.getMonth()+1).toString().padStart(2,'0') + "." + d.getDate().toString().padStart(2,'0');
                    globalMsgs.unshift({ date: dateStr, content: txt });
                    if(renderStackCards) renderStackCards();
                    resetModal(btn, inputEl);
                }
            } catch(e) { console.log(e); resetModal(btn, inputEl, false); }
        }

        function resetModal(btn, inputEl, success=true) {
            btn.innerText = "ÂèëÂ∏É";
            btn.disabled = false;
            closeGame();
            inputEl.value = ''; 
        }

        let gameInterval = null;
        function closeGame() { document.getElementById('gameOverlay').classList.remove('active'); clearInterval(gameInterval); document.removeEventListener('keydown', controlTetris); document.removeEventListener('keydown', controlSnake); }
        let mines=[], flags=[], msOver=false, safeCells=0;
        function initMinesweeper(){document.getElementById('gameOverlay').classList.add('active');document.getElementById('modalMinesweeper').style.display='block';document.getElementById('modalTetris').style.display='none';document.getElementById('modalSnake').style.display='none';document.getElementById('modalMsg').style.display='none';createMSBoard();}
        function createMSBoard(){const b=document.getElementById('msBoard');b.innerHTML='';mines=Array(100).fill(false);flags=Array(100).fill(false);msOver=false;safeCells=90;document.getElementById('msStatus').innerText="Find 10 Mines";let c=0;while(c<10){let i=Math.floor(Math.random()*100);if(!mines[i]){mines[i]=true;c++;}}for(let i=0;i<100;i++){const c=document.createElement('div');c.className='cell';c.onclick=()=>clickMS(i);c.oncontextmenu=(e)=>{e.preventDefault();flagMS(i);};b.appendChild(c);}}
        function clickMS(i){if(msOver||flags[i])return;const c=document.getElementById('msBoard').children[i];if(mines[i]){c.classList.add('mine');c.innerText='üí£';document.getElementById('msStatus').innerText="Game Over!";msOver=true;revealMSAll();}else{revealMS(i);checkMSWin();}}
        function flagMS(i){if(msOver||document.getElementById('msBoard').children[i].classList.contains('open'))return;flags[i]=!flags[i];const c=document.getElementById('msBoard').children[i];c.classList.toggle('flag');c.innerText=flags[i]?'üö©':'';}
        function revealMS(i){const c=document.getElementById('msBoard').children[i];if(c.classList.contains('open')||flags[i])return;c.classList.add('open');safeCells--;let n=0,r=Math.floor(i/10),col=i%10;for(let dr=-1;dr<=1;dr++)for(let dc=-1;dc<=1;dc++){const nr=r+dr,nc=col+dc;if(nr>=0&&nr<10&&nc>=0&&nc<10&&mines[nr*10+nc])n++;}if(n>0){c.innerText=n;c.style.color=['','blue','green','red','purple'][n];}else{for(let dr=-1;dr<=1;dr++)for(let dc=-1;dc<=1;dc++){const nr=r+dr,nc=col+dc;if(nr>=0&&nr<10&&nc>=0&&nc<10)revealMS(nr*10+nc);}}}
        function checkMSWin(){if(safeCells===0){document.getElementById('msStatus').innerText="Victory! üéâ";msOver=true;ee(window.innerWidth/2,window.innerHeight/2);}}
        function revealMSAll(){for(let i=0;i<100;i++)if(mines[i]){const c=document.getElementById('msBoard').children[i];c.classList.add('mine');c.innerText='üí£';}}
        
        // Tetris Logic
        const SHAPES=[[[1,1,1,1]],[[1,1,1],[0,1,0]],[[1,1,1],[1,0,0]],[[1,1,1],[0,0,1]],[[1,1],[1,1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]]],COLORS=['cyan','purple','orange','blue','yellow','red','green'];let tBoard=[],curPiece=null,curX=0,curY=0,tScore=0;
        function initTetris(){document.getElementById('gameOverlay').classList.add('active');document.getElementById('modalMinesweeper').style.display='none';document.getElementById('modalTetris').style.display='block';document.getElementById('modalSnake').style.display='none';document.getElementById('modalMsg').style.display='none';tBoard=Array(20).fill().map(()=>Array(10).fill(0));tScore=0;document.getElementById('tetrisStatus').innerText="Score: 0";spawnPiece();drawTetris();if(gameInterval)clearInterval(gameInterval);gameInterval=setInterval(()=>moveTetris(0,1),500);document.addEventListener('keydown',controlTetris);}
        function drawTetris(){const el=document.getElementById('tetrisBoard');el.innerHTML='';let d=tBoard.map(r=>[...r]);if(curPiece){for(let y=0;y<curPiece.length;y++)for(let x=0;x<curPiece[y].length;x++)if(curPiece[y][x]&&curY+y>=0&&curY+y<20&&curX+x>=0&&curX+x<10)d[curY+y][curX+x]=curPiece.color+1;}for(let y=0;y<20;y++)for(let x=0;x<10;x++){const div=document.createElement('div');div.className='t-cell';if(d[y][x]){div.style.background=COLORS[d[y][x]-1];div.style.border='1px solid rgba(0,0,0,0.2)';}el.appendChild(div);}}
        function spawnPiece(){const id=Math.floor(Math.random()*SHAPES.length);curPiece=SHAPES[id];curPiece.color=id;curX=3;curY=0;if(collision(0,0)){clearInterval(gameInterval);document.getElementById('tetrisStatus').innerText="Game Over! Score: "+tScore;document.removeEventListener('keydown',controlTetris);}}
        function collision(dx,dy,p=curPiece){for(let y=0;y<p.length;y++)for(let x=0;x<p[y].length;x++)if(p[y][x]){let nx=curX+x+dx,ny=curY+y+dy;if(nx<0||nx>=10||ny>=20||(ny>=0&&tBoard[ny][nx]))return true;}return false;}
        function moveTetris(dx,dy){if(!collision(dx,dy)){curX+=dx;curY+=dy;drawTetris();return true;}else if(dy>0){for(let y=0;y<curPiece.length;y++)for(let x=0;x<curPiece[y].length;x++)if(curPiece[y][x]&&curY+y>=0)tBoard[curY+y][curX+x]=curPiece.color+1;for(let y=19;y>=0;y--)if(tBoard[y].every(c=>c!==0)){tBoard.splice(y,1);tBoard.unshift(Array(10).fill(0));tScore+=100;document.getElementById('tetrisStatus').innerText="Score: "+tScore;y++;}spawnPiece();drawTetris();return false;}return false;}
        function rotateTetris(){const r=curPiece[0].map((_,i)=>curPiece.map(row=>row[i]).reverse());r.color=curPiece.color;if(!collision(0,0,r)){curPiece=r;drawTetris();}}
        function controlTetris(e){if(document.getElementById('modalTetris').style.display!=='none'){if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight',' '].includes(e.key))e.preventDefault();if(e.key==='ArrowLeft')moveTetris(-1,0);else if(e.key==='ArrowRight')moveTetris(1,0);else if(e.key==='ArrowDown')moveTetris(0,1);else if(e.key==='ArrowUp')rotateTetris();else if(e.key===' '){while(moveTetris(0,1)){}}}}
        
        // Snake Logic
        let snake=[],food={},dir={},nextDir={};
        function initSnake(){document.getElementById('gameOverlay').classList.add('active');document.getElementById('modalMinesweeper').style.display='none';document.getElementById('modalTetris').style.display='none';document.getElementById('modalSnake').style.display='block';document.getElementById('modalMsg').style.display='none';snake=[{x:10,y:10}];dir={x:0,y:0};nextDir={x:0,y:0};tScore=0;document.getElementById('snakeStatus').innerText="Score: 0";placeFood();drawSnake();if(gameInterval)clearInterval(gameInterval);gameInterval=setInterval(updateSnake,150);document.addEventListener('keydown',controlSnake);}
        function placeFood(){food={x:Math.floor(Math.random()*20),y:Math.floor(Math.random()*20)};for(let s of snake)if(s.x===food.x&&s.y===food.y)placeFood();}
        function updateSnake(){dir=nextDir;if(dir.x===0&&dir.y===0)return;const h={x:snake[0].x+dir.x,y:snake[0].y+dir.y};if(h.x<0||h.x>=20||h.y<0||h.y>=20||snake.some(s=>s.x===h.x&&s.y===h.y)){clearInterval(gameInterval);document.getElementById('snakeStatus').innerText="Game Over! Score: "+tScore;return;}snake.unshift(h);if(h.x===food.x&&h.y===food.y){tScore+=10;document.getElementById('snakeStatus').innerText="Score: "+tScore;placeFood();}else{snake.pop();}drawSnake();}
        function drawSnake(){const el=document.getElementById('snakeBoard');el.innerHTML='';for(let y=0;y<20;y++)for(let x=0;x<20;x++){const d=document.createElement('div');d.className='s-cell';if(x===food.x&&y===food.y)d.classList.add('s-food');if(snake.some(s=>s.x===x&&s.y===y))d.classList.add('s-snake');el.appendChild(d);}}
        function controlSnake(e){if(document.getElementById('modalSnake').style.display!=='none'){if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(e.key))e.preventDefault();changeSnakeDirFromKey(e.key);}}
        function changeSnakeDirFromKey(key) {
            if(key==='ArrowUp'&&dir.y===0)nextDir={x:0,y:-1};else if(key==='ArrowDown'&&dir.y===0)nextDir={x:0,y:1};else if(key==='ArrowLeft'&&dir.x===0)nextDir={x:-1,y:0};else if(key==='ArrowRight'&&dir.x===0)nextDir={x:1,y:0};
        }
        function changeSnakeDir(dx, dy) {
            if(dx === 0 && dy === -1 && dir.y === 0) nextDir={x:0,y:-1};
            else if(dx === 0 && dy === 1 && dir.y === 0) nextDir={x:0,y:1};
            else if(dx === -1 && dy === 0 && dir.x === 0) nextDir={x:-1,y:0};
            else if(dx === 1 && dy === 0 && dir.x === 0) nextDir={x:1,y:0};
        }
    </script>
</body>
</html>